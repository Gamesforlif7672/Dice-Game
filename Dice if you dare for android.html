<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dice If You Dare</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    background-color: #f2f2f2;
  }
  #dice-buttons, #menu-buttons, #upgrades-buttons {
    margin: 10px 0;
  }
  button {
    margin: 5px;
    padding: 10px 20px;
    font-size: 16px;
  }
  #result, #points {
    font-size: 20px;
    margin: 10px 0;
  }
</style>
</head>
<body>

<div id="result">Welcome to Dice If You Dare!</div>
<div id="points">Points: 0</div>

<div id="dice-buttons"></div>

<button id="menu-button">Menu</button>
<div id="menu-buttons" style="display:none;"></div>
<div id="upgrades-buttons" style="display:none;"></div>

<script>
let points = 0;

const diceUpgrades = [1,1,1,1,1,1];
const diceUnlocked = [true,false,false,false,false,false];

const unlockCosts = [0,2500,12500,50000,250000,500000];
const rollCosts = [0,250,1250,5000,25000,50000];
const upgradeScale = [1.15,1.25,1.35,1.45,1.55,1.65];
const diceMax = [6,8,10,12,20,100];

const baseMultipliers = [];
for (let i=0;i<6;i++){
  let avgRoll = Math.floor((diceMax[i]+1)/2);
  let mult = Math.ceil(rollCosts[i]/avgRoll);
  baseMultipliers.push(mult < 1 ? 1 : mult);
}

const diceNames = ["D6","D8","D10","D12","D20","D100"];

const resultDiv = document.getElementById("result");
const pointsDiv = document.getElementById("points");
const diceButtonsDiv = document.getElementById("dice-buttons");
const menuButton = document.getElementById("menu-button");
const menuButtonsDiv = document.getElementById("menu-buttons");
const upgradesButtonsDiv = document.getElementById("upgrades-buttons");

// Create dice buttons
diceNames.forEach((name,index)=>{
  const btn = document.createElement("button");
  updateDiceButton(btn,index);
  diceButtonsDiv.appendChild(btn);
  btn.onclick = ()=>{
    if (!diceUnlocked[index]){
      if (points >= unlockCosts[index]){
        points -= unlockCosts[index];
        diceUnlocked[index] = true;
        resultDiv.innerText = name + " unlocked!";
        pointsDiv.innerText = "Points: "+points;
        updateDiceButton(btn,index);
      } else {
        resultDiv.innerText = "Not enough points to unlock "+name;
      }
      return;
    }
    if (points >= rollCosts[index]){
      points -= rollCosts[index];
      let roll = Math.floor(Math.random()*diceMax[index])+1;
      let multiplier = baseMultipliers[index]*diceUpgrades[index];
      let total = roll*multiplier;
      points += total;
      resultDiv.innerText = `Rolled ${name}: ${roll} Ã— ${multiplier} = ${total}`;
      pointsDiv.innerText = "Points: "+points;
    } else {
      resultDiv.innerText = "Not enough points to roll "+name;
    }
  };
});

// Menu button
menuButton.onclick = ()=>{
  diceButtonsDiv.style.display = diceButtonsDiv.style.display === "none" ? "block" : "none";
  upgradesButtonsDiv.style.display = "none";
  menuButtonsDiv.style.display = menuButtonsDiv.style.display === "none" ? "block" : "none";
  menuButtonsDiv.innerHTML = "";
  
  const pointsDisplay = document.createElement("button");
  pointsDisplay.innerText = "Points: "+points;
  pointsDisplay.disabled = true;
  menuButtonsDiv.appendChild(pointsDisplay);

  const options = ["Dice","Upgrades","Draw","Rebirth","Prestige"];
  options.forEach(option=>{
    const btn = document.createElement("button");
    btn.innerText = option;
    btn.onclick = ()=>{
      if (option === "Dice"){
        diceButtonsDiv.style.display = "block";
        upgradesButtonsDiv.style.display = "none";
        menuButtonsDiv.style.display = "none";
      } else if (option === "Upgrades"){
        showUpgradesMenu();
      } else {
        resultDiv.innerText = option+" menu coming soon!";
      }
    };
    menuButtonsDiv.appendChild(btn);
  });
};

function updateDiceButton(btn,index){
  if (!diceUnlocked[index]){
    btn.innerText = `${diceNames[index]} (Unlock: ${unlockCosts[index]})`;
  } else {
    btn.innerText = `${diceNames[index]} (Roll: ${rollCosts[index]})`;
  }
}

function showUpgradesMenu(){
  menuButtonsDiv.style.display = "none";
  diceButtonsDiv.style.display = "none";
  upgradesButtonsDiv.style.display = "block";
  upgradesButtonsDiv.innerHTML = "";

  const title = document.createElement("div");
  title.innerText = "Upgrades";
  title.style.fontSize = "24px";
  upgradesButtonsDiv.appendChild(title);

  const pointsInUpgrade = document.createElement("div");
  pointsInUpgrade.innerText = "Points: "+points;
  pointsInUpgrade.style.fontSize = "20px";
  upgradesButtonsDiv.appendChild(pointsInUpgrade);

  diceNames.forEach((name,index)=>{
    const btn = document.createElement("button");
    updateUpgradeButton(btn,index);
    upgradesButtonsDiv.appendChild(btn);
    btn.onclick = ()=>{
      if (!diceUnlocked[index]){
        resultDiv.innerText = name+" not unlocked yet!";
        return;
      }
      let baseCost = index === 0 ? 50 : unlockCosts[index];
      let scale = upgradeScale[index];
      let cost = Math.floor(baseCost * Math.pow(scale,diceUpgrades[index]-1));
      if (points >= cost){
        points -= cost;
        diceUpgrades[index]++;
        resultDiv.innerText = name+" upgraded! Level: "+diceUpgrades[index];
        pointsDiv.innerText = "Points: "+points;
        pointsInUpgrade.innerText = "Points: "+points;
        updateUpgradeButton(btn,index);
      } else {
        resultDiv.innerText = "Not enough points! Upgrade cost: "+cost;
      }
    };
  });

  const backBtn = document.createElement("button");
  backBtn.innerText = "Back";
  backBtn.onclick = ()=>{
    upgradesButtonsDiv.style.display = "none";
    diceButtonsDiv.style.display = "block";
  };
  upgradesButtonsDiv.appendChild(backBtn);
}

function updateUpgradeButton(btn,index){
  let baseCost = index===0?50:unlockCosts[index];
  let scale = upgradeScale[index];
  let cost = Math.floor(baseCost * Math.pow(scale,diceUpgrades[index]-1));
  btn.innerText = `${diceNames[index]} Upgrade (Level: ${diceUpgrades[index]}, Cost: ${cost})`;
}
</script>
</body>
</html>

